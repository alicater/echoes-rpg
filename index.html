<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Echoes of the Hollow Vale</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      background-color: #1a1a1a;
      color: #f4f4f4;
      margin: 0;
      padding: 20px;
      max-width: 800px;
      margin: auto;
      position: relative;
    }
    .container {
      margin-top: 40px;
    }
    button {
      background-color: #444;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 10px 10px 10px 0;
      cursor: pointer;
    }
    button:hover {
      background-color: #666;
    }
    .character {
      margin-bottom: 20px;
      display: flex;
      align-items: center;
    }
    .character img {
      width: 120px;
      height: auto;
      margin-right: 20px;
      border: 2px solid #777;
    }
    #restartBtn {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 100;
    }
    .story-image {
      max-width: 100%;
      margin: 15px 0;
      border: 2px solid #888;
    }
  </style>
</head>
<body>
  <h1>Echoes of the Hollow Vale</h1>
  <div class="container" id="game"></div>

  <script>
    const characters = {
      scholar: {
        name: "Wayward Scholar",
        intro: "A brilliant mind driven by curiosity, you seek forbidden knowledge hidden in forgotten tomes.",
        img: "scholar.png"
      },
      blade: {
        name: "Wandering Blade",
        intro: "A weary warrior with a code, you seek redemption in one final mission.",
        img: "blade.png"
      },
      rogue: {
        name: "Shadowed Rogue",
        intro: "You move in silence, always watching. You trust no one and live by your instincts.",
        img: "rogue.png"
      },
      mystic: {
        name: "Mystic Acolyte",
        intro: "You were touched by something beyond this world — a voice from the veil whispers secrets only you can hear.",
        img: "mystic.png"
      }
    };

    const storyNodes = {
      start: {
        text: "Choose your character:",
        choices: [
          { text: characters.scholar.name, next: "act1", character: "scholar" },
          { text: characters.blade.name, next: "act1", character: "blade" },
          { text: characters.rogue.name, next: "act1", character: "rogue" },
          { text: characters.mystic.name, next: "act1", character: "mystic" }
        ]
      },
      act1: {
        get text() {
          switch (player.character) {
            case "scholar":
              return "As the Wayward Scholar, your obsession with the arcane has brought you to Hollow Vale. Whispers in ancient texts spoke of a breach — a thinning of the veil between worlds — and you intend to witness it firsthand.";
            case "blade":
              return "You are the Wandering Blade, once a knight of honor, now a drifter weighed by regret. Rumors of danger in Hollow Vale stirred something in your soul — perhaps this is the redemption you've been seeking.";
            case "rogue":
              return "To others, Hollow Vale is a mystery. To you, it’s an opportunity. As the Shadowed Rogue, you’ve followed faint trails and forgotten tales to this cursed place, hoping for a prize no one else dares claim.";
            case "mystic":
              return "You are the Mystic Acolyte. Visions have plagued your dreams for weeks — a vale cloaked in fog, voices leaking through cracks in reality. You arrive at the village guided not by logic, but by fate.";
            default:
              return "You stand at the edge of Hollow Vale...";
          }
        },
        choices: [
          { text: "Head to the village center", next: "village_center" },
          { text: "Slip into the forest path", next: "forest_path" }
        ]
      },
      village_center: {
        text: "Villagers whisper nervously. The elder meets your eyes and says, 'You’ve come at last. We feared the veil would take us all.'",
        choices: [
          { text: "Ask about the veil", next: "ask_veil" },
          { text: "Say nothing and observe", next: "observe" }
        ]
      },
      forest_path: {
        text: "The path winds between twisted trees. You find strange symbols carved into the bark and hear whispers just beyond your hearing.",
        choices: [
          { text: "Touch the symbols", next: "touch_symbols" },
          { text: "Turn back to the village", next: "village_center" }
        ]
      },
      ask_veil: {
        text: "'The veil is a boundary between this world and the next,' the elder says. 'It’s thinning — and something is coming through.'",
        choices: [{ text: "Continue...", next: "act2a" }]
      },
      observe: {
        text: "You watch the villagers. Fear and hope war in their eyes. You feel the wind shift — like a breath from beyond.",
        choices: [{ text: "Continue...", next: "act2a" }]
      },
      touch_symbols: {
        text: "As your fingers brush the symbols, your vision blurs. For a moment, you see another world layered over this one — then it vanishes.",
        choices: [{ text: "Continue...", next: "act2a" }]
      },
      act2a: {
        text: "You venture deeper into the Vale. The fog thickens, and a strange glow flickers in the distance. Whatever lies ahead, you sense it will shape your fate.",
        choices: [{ text: "Proceed toward the light...", next: "act2b" }]
      },
      act2b: {
        text: "The light leads to an ancient altar where the air buzzes with energy. Depending on who you are, the encounter ahead will challenge your past and reveal your path.",
        choices: [{ text: "Approach the altar", next: "act2" }]
      },
      act2: {
        get text() {
          switch (player.character) {
            case "scholar":
              return `<img src='assets/scholar_quest.png' class='story-image' alt='Ancient tome in ruins'>As you follow an underground passage revealed by the elder’s clues, you discover a ruined library sealed behind arcane wards. Runes flare as you approach, testing your wit to unlock a tome that hums with forbidden power.`;
            case "blade":
              return `<img src='assets/blade_quest.png' class='story-image' alt='Ancient battlefield in mist'>A call leads you to the forgotten battlefield just beyond the Vale. There, shades of your past allies stand in silent judgment. To pass, you must face a spectral version of yourself — a trial of honor and memory.`;
            case "rogue":
              return `<img src='assets/rogue_quest.png' class='story-image' alt='Shadowy ruins'>You slip into a sunken crypt marked with sigils only thieves would notice. A puzzle-locked chest and the whisper of a ghostly thief dare you to uncover a hidden truth — but not without risk.`;
            case "mystic":
              return `<img src='assets/mystic_quest.png' class='story-image' alt='Veil portal'>The veil calls louder in a clearing veiled in blue flame. You fall into trance, stepping through a tear in reality into a world of spirits. A glowing child waits to test your connection to the other side.`;
            default:
              return "The second act continues...";
          }
        },
        choices: [
          { text: "Continue your journey...", next: "act3_placeholder" }
        ]
      },
      act3_placeholder: {
        text: "(Act III coming soon...)",
        choices: []
      }
    };

    let player = {
      character: null
    };

    function showNode(nodeId) {
      const node = storyNodes[nodeId];
      const gameContainer = document.getElementById('game');
      const displayText = typeof node.text === 'function' || typeof node.text === 'object' ? node.text : () => node.text;
      gameContainer.innerHTML = `<div>${displayText()}</div>`;

      if (nodeId === "start") {
        node.choices.forEach(choice => {
          const char = characters[choice.character];
          const div = document.createElement('div');
          div.className = 'character';
          const img = document.createElement('img');
          img.src = `assets/${char.img}`;
          img.alt = `${char.name} portrait`;
          const info = document.createElement('div');
          info.innerHTML = `<strong>${char.name}</strong><br><em>${char.intro}</em><br>`;
          const btn = document.createElement('button');
          btn.textContent = `Play as ${char.name}`;
          btn.onclick = () => {
            player.character = choice.character;
            showNode(choice.next);
          };
          info.appendChild(btn);
          div.appendChild(img);
          div.appendChild(info);
          gameContainer.appendChild(div);
        });
      } else {
        node.choices.forEach(choice => {
          const btn = document.createElement('button');
          btn.textContent = choice.text;
          btn.onclick = () => {
            if (choice.character) player.character = choice.character;
            showNode(choice.next);
          };
          gameContainer.appendChild(btn);
        });
      }

      const existingRestart = document.getElementById('restartBtn');
      if (existingRestart) existingRestart.remove();

      if (nodeId !== "start") {
        const restartBtn = document.createElement('button');
        restartBtn.textContent = "Restart Story";
        restartBtn.id = "restartBtn";
        restartBtn.onclick = () => {
          player.character = null;
          showNode("start");
        };
        document.body.appendChild(restartBtn);
      }
    }

    showNode("start");
  </script>
</body>
</html>
